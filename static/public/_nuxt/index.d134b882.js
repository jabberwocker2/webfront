import{_ as R}from"./nuxt-link.a6f9bb0b.js";import{f as U,g as D,r as B,h as T,i as W,j as M,o as l,c as r,a as e,k as t,l as x,t as u,F as v,m as w,n as z,b as p,w as S,d as N,q as k,s as V,v as G,_ as H,x as J}from"./entry.f5625d91.js";import K from"./MainLayout.238a28c0.js";import"./TopNav.d96a6528.js";const Q=["id"],X=["src"],Y={class:"pl-3 w-full px-"},Z={key:0,class:"flex items-center justify-between pb-0.5 mt-[5%]"},ee={class:"font-bold hover:underline cursor-pointer"},te={class:"text-[13px] text-light text-gray-500 pl-1 cursor-pointer"},se={key:1,class:"commentText text-[30px] pb-0.5 break-words md:max-w-[400px] max-w-[300px]"},oe={key:2,class:"flex items-center pb-0.5 border-b-2"},le={key:0,class:"debate relative min-h-[480px] max-h-[580px] min-w-[265px] items-center bg-white dark:bg-black-200 rounded-xl cursor-pointer"},ne={class:"commentArea w-full border-l-2"},re=["src"],ie={class:"ml-1 pt-0.5 w-full"},ae={class:"text-[18px] flex justify-between"},ce={class:"commentText text-[15px] break-words max-w-[70%]"},de={class:"commentText text-[15px] break-words max-w-[70%]"},ue={key:1,class:"relative min-h-[480px] max-h-[750px] max-w-[420px] justify-self-center items-center bg-black rounded-xl"},pe={class:"absolute bottom-2 left-3 text-white mb-2 ml-2 z-2"},_e={class:"flex items-center pb-0.5"},xe=["src"],me={class:"font-bold hover:underline cursor-pointer mr-2"},fe={key:0,class:"text-[30px] pb-0.5 break-words md:max-w-[400px] max-w-[300px]"},ve={class:"text-[15px] pb-0.5 break-words md:max-w-[400px] max-w-[300px]"},he={class:"flex items-center pb-0.5"},be={key:1,class:"text-[14px] pb-0.5 flex items-center font-semibold"},ye=e("div",{class:"px-1"},"original sound - AWESOME",-1),ge={class:"absolute bottom-0 right-0 text-white"},we={class:"pb-4 text-center"},ke={class:"text-xs text-gray-800 font-semibold"},$e={class:"pt-4 pb-4 text-center"},Ce={class:"p-2 cursor-pointer"},ze=e("span",{class:"text-xs text-gray-800 font-semibold"},"43",-1),Se={class:"pt-4 text-center"},Le={class:"p-2 cursor-pointer"},Pe=e("span",{class:"text-xs text-gray-800 font-semibold"},"55",-1),Ae=["src"],je={key:2,class:"relative mr-[20px]"},Be={class:"absolute bottom-0 right-0"},Me={class:"pb-4 text-center"},Ne={class:"text-xs text-gray-800 font-semibold"},Te={class:"pt-4 pb-4 text-center"},Ve={class:"rounded-full bg-gray-200 p-2 cursor-pointer"},Ee=e("span",{class:"text-xs text-gray-800 font-semibold"},"43",-1),Oe={class:"pt-4 text-center"},Ie={class:"rounded-full bg-gray-200 p-2 cursor-pointer"},Fe=e("span",{class:"text-xs text-gray-800 font-semibold"},"55",-1),qe={key:3,class:"relative mr-[20px]"},Re={key:0,class:"sm:w-[60%] w-full"},Ue=e("textarea",{cols:"30",rows:"4",maxlength:"80",class:"resize-none w-full text-gray-800 border border-gray-300 rounded-md py-2.5 px-3 focus:outline-none"},null,-1),De=e("button",{class:"flex items-center bg-[#f0cc2c] text-white border rounded-md ml-3 px-3 py-[6px]"},[e("span",{class:"mx-4 font-medium text-[15px]"},"Post reply")],-1),We=[Ue,De],Ge={__name:"PostMain",props:["post","user"],setup(h){const f=h,{$generalStore:i,$userStore:a,$profileStore:L}=V(),{post:s,user:_}=U(f),E=D();var b=!1;B(null);var O=s.value.tags,$=new Array;$=O.split(",");let m=B(null);console.log(s),console.log(i.selectedTags,"selected tags"),console.log(s.value.video!="http://localhost:8000"),s.value.video!="http://localhost:8000"&&(T(()=>{i.selectedPost=s.value,new IntersectionObserver(function(o){o[0].isIntersecting?(console.log("Element is playing"+s.value.id),m.value.play()):(console.log("Element is paused"+s.value.id),m.value.pause())},{threshold:[.6]}).observe(document.getElementById(`PostMain-${s.value.id}`))}),W(()=>{m.value.pause(),m.value.currentTime=0,m.value.src=""}));const I=async(d,o)=>{let C=confirm("Are you sure you want to delete this comment?");try{C&&await a.deleteComment(d,o)}catch(c){console.log(c)}},y=M(()=>!!s.value.likes.find(o=>o.user_id===a.id));M(()=>!!_.value.follow.find(o=>o.user_id===a.id));const P=async d=>{if(!a.id){i.isLoginOpen=!0;return}try{await a.likePost(d)}catch(o){console.log(o)}},A=async d=>{if(!a.id){i.isLoginOpen=!0;return}try{await a.unlikePost(d,!1)}catch(o){console.log(o)}},j=async d=>{if(!a.id){i.isLoginOpen=!0;return}try{await a.follow()}catch(o){console.log(o)}},F=()=>{b==!1?(console.log("reached if"),b=!0):b=!1,console.log("reply to comment",i.replyActive)},g=d=>{if(!a.id){i.isLoginOpen=!0;return}setTimeout(()=>E.push(`/profile/${d.id}`),200)};return(d,o)=>{const C=R,c=G;return l(),r(v,null,[e("div",{id:`PostMain-${t(s).id}`,class:"flex"},[t(s).video=="http://localhost:8000"?(l(),r("div",{key:0,onClick:o[0]||(o[0]=n=>g(t(s).user)),class:"cursor-pointer"},[e("img",{class:"rounded-full max-h-[60px]",width:"60",src:t(s).user.image},null,8,X)])):x("",!0),e("div",Y,[t(s).video=="http://localhost:8000"?(l(),r("div",Z,[e("button",{onClick:o[1]||(o[1]=n=>g(t(s).user))},[e("span",ee,u(t(i).allLowerCaseNoCaps(t(s).user.name)),1),e("span",te,u(t(s).user.name),1)]),e("button",{onClick:o[2]||(o[2]=n=>j(t(_))),class:"border text-[15px] px-[21px] py-0.5 hover:bg-[#ffeef2] font-semibold rounded-md"}," Follow ")])):x("",!0),t(s).video=="http://localhost:8000"?(l(),r("div",se,u(t(s).text),1)):x("",!0),t(s).video=="http://localhost:8000"?(l(),r("div",oe,[(l(!0),r(v,null,w(t($),n=>(l(),r("div",{class:z([`${n.trim().toLowerCase()}`,"text-[14px] pb-0.5 pr-1"]),key:n},u(n.replace("All","")),3))),128))])):x("",!0),e("div",null,[t(s).video=="http://localhost:8000"?(l(),r("div",le,[(l(!0),r(v,null,w(t(s).comments,n=>(l(),r("div",{key:n,class:"commentSection unset mt-2 max-w-[500px]"},[e("div",ne,[p(C,{to:`/profile/${n.user.id}`},{default:S(()=>[e("img",{class:"rounded-full mt-[5px]",width:"20",src:n.user.image},null,8,re)]),_:2},1032,["to"]),e("div",ie,[e("div",ae,[N(u(n.user.name)+" ",1),t(a).id===n.user.id?(l(),k(c,{key:0,onClick:q=>I(t(i).selectedPost,n.id),class:"cursor-pointer",name:"material-symbols:delete-outline-sharp",size:"25"},null,8,["onClick"])):x("",!0)]),e("div",ce,u(n.text),1),e("div",de,[p(c,{name:"mdi:lightbulb",size:"15"}),p(c,{onClick:o[3]||(o[3]=q=>F()),name:"mdi:message-reply-text",size:"15",class:"ml-3"})])])])]))),128))])):(l(),r("div",ue,[e("div",pe,[e("div",_e,[e("div",{onClick:o[4]||(o[4]=n=>g(t(s).user)),class:"cursor-pointer"},[e("img",{class:"rounded-full max-h-[60px] mr-2",width:"30",src:t(s).user.image},null,8,xe)]),e("button",{onClick:o[5]||(o[5]=n=>g(t(s).user))},[e("span",me,u(t(i).allLowerCaseNoCaps(t(s).user.name)),1)]),e("button",{onClick:o[6]||(o[6]=n=>j(t(_))),class:"border text-[15px] px-[21px] py-0.5 hover:bg-[#ffeef2] font-semibold rounded-md"}," Follow ")]),t(s).video=="http://localhost:8000"?(l(),r("div",fe,u(t(s).text),1)):x("",!0),e("div",ve,u(t(s).text),1),e("div",he,[N(" 800px800px "),(l(!0),r(v,null,w(t($),n=>(l(),r("div",{class:z([`${n.trim().toLowerCase()}`,"text-[14px] pb-0.5 pr-1"]),key:n},u(n.replace("All","")),3))),128))]),t(s).video!="http://localhost:8000"?(l(),r("div",be,[p(c,{name:"mdi:music",size:"17"}),ye,p(c,{name:"mdi:lightbulb",size:"20"})])):x("",!0)]),e("div",ge,[e("div",we,[e("div",null,[e("button",{onClick:o[7]||(o[7]=n=>t(y)?A(t(s)):P(t(s))),class:"p-2 cursor-pointer"},[p(c,{name:"mdi:lightbulb",size:"35",color:t(y)?"#f0cc2c":""},null,8,["color"])])]),e("span",ke,u(t(s).likes.length),1)]),e("div",$e,[e("div",Ce,[p(c,{name:"bx:bxs-message-rounded-dots",size:"35"})]),ze]),e("div",Se,[e("div",Le,[p(c,{name:"ri:share-forward-fill",size:"35"})]),Pe])]),e("video",{ref_key:"video",ref:m,loop:"",muted:"",class:"rounded-xl object-cover mx-auto h-full",src:t(s).video},null,8,Ae)])),t(s).video=="http://localhost:8000"?(l(),r("div",je,[e("div",Be,[e("div",Me,[e("div",null,[e("button",{onClick:o[8]||(o[8]=n=>t(y)?A(t(s)):P(t(s))),class:"rounded-full bg-gray-200 p-2 cursor-pointer"},[p(c,{name:"mdi:lightbulb",size:"25",color:t(y)?"#f0cc2c":""},null,8,["color"])])]),e("span",Ne,u(t(s).likes.length),1)]),e("div",Te,[e("div",Ve,[p(c,{name:"bx:bxs-message-rounded-dots",size:"25"})]),Ee]),e("div",Oe,[e("div",Ie,[p(c,{name:"ri:share-forward-fill",size:"25"})]),Fe])])])):(l(),r("div",qe))])])],8,Q),t(b)==!0?(l(),r("div",Re,We)):x("",!0)],64)}}},He=Ge;const Je={name:"VueScrollSnap",props:{fullscreen:{type:Boolean,default:!1,required:!1},horizontal:{type:Boolean,default:!1,required:!1}}};function Ke(h,f,i,a,L,s){return l(),r("div",{class:z(["scroll-snap-container",{fullscreen:i.fullscreen,horizontal:i.horizontal}])},[J(h.$slots,"default")],2)}const Qe=H(Je,[["render",Ke]]);const Xe={key:0,class:"item w-[700px] border-t-2 border-l-2 ml-[10px]"},Ye={key:1,class:"item w-[700px] border-t-2 border-l-2 ml-[10px]"},ot={__name:"index",setup(h){const{$generalStore:f,$userStore:i}=V();return T(async()=>{try{f.getAllUsersAndPosts(""),console.log(i.color,"color")}catch(a){console.log(a)}}),(a,L)=>{const s=He;return l(),k(K,null,{default:S(()=>[p(t(Qe),{class:"grid justify-self-center"},{default:S(()=>[(l(!0),r(v,null,w(t(f).posts,_=>(l(),r("div",{key:_,class:"pt-[90px] w-{calc(100px-90px)} max-w-[690px] lg:justify-self-center md:justify-self-center"},[_.video=="http://localhost:8000"?(l(),r("div",Xe,[_?(l(),k(s,{key:0,post:_},null,8,["post"])):x("",!0)])):(l(),r("div",Ye,[_?(l(),k(s,{key:0,post:_,class:"mt-3 grid"},null,8,["post"])):x("",!0)]))]))),128))]),_:1})]),_:1})}}};export{ot as default};
